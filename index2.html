<html>
<head>
<script>

const storeProducts = {
  'Tshirt':  2500,
  'Sweater': 5000,
  'Jeans':   4000,
};

let totalPrice = 0;
let orderedProducts = {};

function showContent() {

  const params = (new URL(location.href)).search;
  const productName = (new URLSearchParams(params)).get('product');

  if (storeProducts[productName] == undefined) {
    for (const productName in storeProducts) {
      document.querySelector('#content').innerHTML +=
        `<img src="./img/${productName}.png"><br>
        <p><a href="?product=${productName}">${productName}</a></p>`;
    }
    return;
  }

  document.querySelector('#content').innerHTML += `
    <img src="./img/${productName}.png"><br>
    ${storeProducts[productName]}<br>
    <p><a id="buy" href="#">Buy</a></p>`
  document.querySelector('#buy').addEventListener('click',
      () => addProduct(productName));

}

window.addEventListener('load', showContent);

function addProduct(productName) {
  totalPrice += storeProducts[productName];
  orderedProducts[productName] = (orderedProducts[productName] || 0) + 1;
  showCart();
}

function showCart() {

  document.querySelector('#content').innerHTML = '';
  for (const productName in orderedProducts) {
    document.querySelector('#content').innerHTML +=
      `<img src="./img/${productName}.png"><br>
      <p>${orderedProducts[productName]} in cart</p>`;
  }

  document.querySelector('#content').innerHTML += '<a id="checkout" href="#">Checkout</a>'
  document.querySelector('#checkout').addEventListener('click', checkout);

}

function checkout() {
  // TODO
}

</script>
<style>

body {font-family: sans-serif; margin: 0; text-align: center;}
h1 {background: #333; color: #fff; padding: 20px;}
#content {font-size: 120%; margin: 50px 0;}
#content a {display: inline-block; padding: 10px 20px; text-decoration: none;
   background: #333; color: #fff; margin: 30px;}

</style>
</head>
<body>

<h1>Simple Store</h1>

<div id="content"></div>

</body>
</html>
